/*! sebraeleme.resources 17-02-2023 */
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};!function(a,b){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):(a=a||self,a.tinybind=b())}(void 0,function(){function a(a){var b=u,c=a;return y.test(a)?c=a.slice(1,-1):"true"===a?c=!0:"false"===a?c=!1:"null"===a?c=null:"undefined"===a?c=void 0:isNaN(a)?b=v:c=Number(a),{type:b,value:c}}function b(a,b){for(var c,d=a.length,e=0,f=0,g=b[0],h=b[1];f<d;){if(e=a.indexOf(g,f),e<0){c&&c.push({type:w,value:a.slice(f)});break}if(c||(c=[]),e>0&&f<e&&c.push({type:w,value:a.slice(f,e)}),f=e+g.length,e=a.indexOf(h,f),e<0){var i=a.slice(f-h.length),j=c[c.length-1];j&&j.type===w?j.value+=i:c.push({type:w,value:i});break}var k=a.slice(f,e).trim();c.push({type:x,value:k}),f=e+h.length}return c}function c(a){return"object"===("undefined"==typeof a?"undefined":_typeof(a))&&null!==a}function d(a){throw new Error("[Observer] "+a)}function e(a){if("checkbox"===a.type)return a.checked;if("select-multiple"===a.type){for(var b,c=[],d=0;d<a.options.length;d++)b=a.options[d],b.selected&&c.push(b.value);return c}return a.value}function f(a,b,c){var d=a.el.cloneNode(!0),e=new J(d,b,a.view.options);return e.bind(),a.marker.parentNode.insertBefore(d,c),e}function g(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function h(a,b,c){return b&&g(a.prototype,b),c&&g(a,c),a}function i(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}function j(a){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function k(a,b){return(k=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(a){return!1}}function m(a,b,c){return m=l()?Reflect.construct:function(a,b,c){var d=[null];d.push.apply(d,b);var e=Function.bind.apply(a,d),f=new e;return c&&k(f,c.prototype),f},m.apply(null,arguments)}function n(a){return Function.toString.call(a).indexOf("[native code]")!==-1}function o(a){var b="function"==typeof Map?new Map:void 0;return(o=function(a){function c(){return m(a,arguments,j(this).constructor)}if(null===a||!n(a))return a;if("function"!=typeof a)throw new TypeError("Super expression must either be null or a function");if("undefined"!=typeof b){if(b.has(a))return b.get(a);b.set(a,c)}return c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),k(c,a)})(a)}var p,q,r,s=["prefix","templateDelimiters","rootInterface","preloadData","handler"],t=["binders","formatters","adapters"],u=0,v=1,w=0,x=1,y=/^'.*'$|^".*"$/,z={binders:{},formatters:{},adapters:{},_prefix:"rv",_fullPrefix:"rv-",get prefix(){return this._prefix},set prefix(a){this._prefix=a,this._fullPrefix=a+"-"},parseTemplate:b,parseType:a,templateDelimiters:["{","}"],rootInterface:".",preloadData:!0,handler:function(a,b,c){this.call(a,b,c.view.models)},fallbackBinder:function(a,b){null!=b?a.setAttribute(this.type,b):a.removeAttribute(this.type)},configure:function(a){var b=this;a&&Object.keys(a).forEach(function(c){var d=a[c];t.indexOf(c)>-1?Object.keys(d).forEach(function(a){b[c][a]=d[a]}):b[c]=d})}},A=function(){function a(a,b,d){this.keypath=b,this.callback=d,this.objectPath=[],this.parse(),this.obj=this.getRootObject(a),c(this.target=this.realize())&&this.set(!0,this.key,this.target,this.callback)}a.updateOptions=function(a){p=a.adapters,q=Object.keys(p),r=a.rootInterface},a.tokenize=function(a,b){var c,d,e=[],f={i:b,path:""};for(c=0;c<a.length;c++)d=a.charAt(c),~q.indexOf(d)?(e.push(f),f={i:d,path:""}):f.path+=d;return e.push(f),e};var b=a.prototype;return b.parse=function(){var b,c;q.length||d("Must define at least one adapter interface."),~q.indexOf(this.keypath[0])?(c=this.keypath[0],b=this.keypath.substr(1)):(c=r,b=this.keypath),this.tokens=a.tokenize(b,c),this.key=this.tokens.pop()},b.realize=function(){for(var a,b,d=this.obj,e=-1,f=0;f<this.tokens.length;f++)b=this.tokens[f],c(d)?("undefined"!=typeof this.objectPath[f]?d!==(a=this.objectPath[f])&&(this.set(!1,b,a,this),this.set(!0,b,d,this),this.objectPath[f]=d):(this.set(!0,b,d,this),this.objectPath[f]=d),d=this.get(b,d)):(e===-1&&(e=f),(a=this.objectPath[f])&&this.set(!1,b,a,this));return e!==-1&&this.objectPath.splice(e),d},b.sync=function(){var a,b,d;(a=this.realize())!==this.target?(c(this.target)&&this.set(!1,this.key,this.target,this.callback),c(a)&&this.set(!0,this.key,a,this.callback),b=this.value(),this.target=a,d=this.value(),(d!==b||d instanceof Function)&&this.callback.sync()):a instanceof Array&&this.callback.sync()},b.value=function(){if(c(this.target))return this.get(this.key,this.target)},b.setValue=function(a){c(this.target)&&p[this.key.i].set(this.target,this.key.path,a)},b.get=function(a,b){return p[a.i].get(b,a.path)},b.set=function(a,b,c,d){var e=a?"observe":"unobserve";p[b.i][e](c,b.path,d)},b.unobserve=function(){for(var a,b,d=0;d<this.tokens.length;d++)b=this.tokens[d],(a=this.objectPath[d])&&this.set(!1,b,a,this);c(this.target)&&this.set(!1,this.key,this.target,this.callback)},b.getRootObject=function(a){var b,c;if(!a.$parent)return a;for(b=this.tokens.length?this.tokens[0].path:this.key.path,c=a;c.$parent&&void 0===c[b];)c=c.$parent;return c},a}(),B=/[^\s']+|'([^']|'[^\s])*'|"([^"]|"[^\s])*"/g,C=/\s+/,D=function(){function b(a,b,c,d,e,f,g){this.view=a,this.el=b,this.type=c,this.keypath=d,this.binder=e,this.arg=f,this.formatters=g,this.formatterObservers={},this.model=void 0}var c=b.prototype;return c.observe=function(a,b){return new A(a,b,this)},c.parseTarget=function(){if(this.keypath){var b=a(this.keypath);0===b.type?this.value=b.value:(this.observer=this.observe(this.view.models,this.keypath),this.model=this.observer.target)}else this.value=void 0},c.parseFormatterArguments=function(b,c){var d=this;return b.map(a).map(function(a,b){var e=a.type,f=a.value;if(0===e)return f;d.formatterObservers[c]||(d.formatterObservers[c]={});var g=d.formatterObservers[c][b];return g||(g=d.observe(d.view.models,f),d.formatterObservers[c][b]=g),g.value()})},c.formattedValue=function(a){var b=this;return this.formatters.reduce(function(a,c,d){var e=c.match(B),f=e.shift(),g=b.view.options.formatters[f],h=b.parseFormatterArguments(e,d);return g&&g.read instanceof Function?a=g.read.apply(g,[a].concat(h)):g instanceof Function&&(a=g.apply(void 0,[a].concat(h))),a},a)},c.eventHandler=function(a){var b=this,c=b.view.options.handler;return function(d){c.call(a,this,d,b)}},c.set=function(a){a=a instanceof Function&&!this.binder.function?this.formattedValue(a.call(this.model)):this.formattedValue(a);var b=this.binder.routine||this.binder;b instanceof Function&&b.call(this,this.el,a)},c.sync=function(){this.observer?(this.model=this.observer.target,this.set(this.observer.value())):this.set(this.value)},c.publish=function(){var a=this;if(this.observer){var b=this.formatters.reduceRight(function(b,c,d){var e=c.split(C),f=e.shift(),g=a.view.options.formatters[f],h=a.parseFormatterArguments(e,d);return g&&g.publish&&(b=g.publish.apply(g,[b].concat(h))),b},this.getValue(this.el));this.observer.setValue(b)}},c.bind=function(){this.parseTarget(),this.binder.hasOwnProperty("bind")&&this.binder.bind.call(this,this.el),this.view.options.preloadData&&this.sync()},c.unbind=function(){var a=this;this.binder.unbind&&this.binder.unbind.call(this,this.el),this.observer&&this.observer.unobserve(),Object.keys(this.formatterObservers).forEach(function(b){var c=a.formatterObservers[b];Object.keys(c).forEach(function(a){c[a].unobserve()})}),this.formatterObservers={}},c.update=function(a){void 0===a&&(a={}),this.observer&&(this.model=this.observer.target),this.binder.update&&this.binder.update.call(this,a)},c.getValue=function(a){return this.binder&&this.binder.getValue?this.binder.getValue.call(this,a):e(a)},b}(),E={routine:function(a,b){a.data=null!=b?b:""}},F=/((?:'[^']*')*(?:(?:[^\|']*(?:'[^']*')+[^\|']*)+|[^\|]+))|^$/g,G=function a(c,d){var e=!1;if(3===d.nodeType){var f=b(d.data,z.templateDelimiters);if(f){for(var g=0;g<f.length;g++){var h=f[g],i=document.createTextNode(h.value);d.parentNode.insertBefore(i,d),1===h.type&&c.buildBinding(i,null,h.value,E,null)}d.parentNode.removeChild(d)}e=!0}else 1===d.nodeType&&(e=c.traverse(d));if(!e)for(var j=0;j<d.childNodes.length;j++)a(c,d.childNodes[j])},H=function(a,b){var c=a.binder?a.binder.priority||0:0,d=b.binder?b.binder.priority||0:0;return d-c},I=function(a){return a.trim()},J=function(){function a(a,b,c){a.jquery||a instanceof Array?this.els=a:this.els=[a],this.models=b,this.options=c,this.build()}var b=a.prototype;return b.buildBinding=function(a,b,c,d,e){var f=c.match(F).map(I),g=f.shift();this.bindings.push(new D(this,a,b,g,d,e,f))},b.build=function(){this.bindings=[];var a,b,c=this.els;for(a=0,b=c.length;a<b;a++)G(this,c[a]);this.bindings.sort(H)},b.traverse=function(a){for(var b,c,d,e,f=z._fullPrefix,g="SCRIPT"===a.nodeName||"STYLE"===a.nodeName,h=a.attributes,i=[],j=this.options.starBinders,k=0,l=h.length;k<l;k++){var m=h[k];if(0===m.name.indexOf(f)){if(b=m.name.slice(f.length),c=this.options.binders[b],e=void 0,!c)for(var n=0;n<j.length;n++)if(d=j[n],b.slice(0,d.length-1)===d.slice(0,-1)){c=this.options.binders[d],e=b.slice(d.length-1);break}if(c||(c=z.fallbackBinder),c.block)return this.buildBinding(a,b,m.value,c,e),a.removeAttribute(m.name),!0;i.push({attr:m,binder:c,type:b,arg:e})}}for(var o=0;o<i.length;o++){var p=i[o];this.buildBinding(a,p.type,p.attr.value,p.binder,p.arg),a.removeAttribute(p.attr.name)}return g},b.bind=function(){this.bindings.forEach(function(a){a.bind()})},b.unbind=function(){this.bindings.forEach(function(a){a.unbind()})},b.sync=function(){this.bindings.forEach(function(a){a.sync()})},b.publish=function(){this.bindings.forEach(function(a){a.binder&&a.binder.publishes&&a.publish()})},b.update=function(a){var b=this;void 0===a&&(a={}),Object.keys(a).forEach(function(c){b.models[c]=a[c]}),this.bindings.forEach(function(b){b.update&&b.update(a)})},a}(),K=["push","pop","shift","unshift","sort","reverse","splice"],L={counter:0,weakmap:{},weakReference:function(a){if(!a.hasOwnProperty("__rv")){var b=this.counter++;Object.defineProperty(a,"__rv",{value:b})}return this.weakmap[a.__rv]||(this.weakmap[a.__rv]={callbacks:{}}),this.weakmap[a.__rv]},cleanupWeakReference:function(a,b){Object.keys(a.callbacks).length||a.pointers&&Object.keys(a.pointers).length||delete this.weakmap[b]},stubFunction:function(a,b){var c=a[b],d=this.weakReference(a),e=this.weakmap;a[b]=function(){for(var b=arguments.length,f=new Array(b),g=0;g<b;g++)f[g]=arguments[g];var h=c.apply(a,f);return Object.keys(d.pointers).forEach(function(a){var b=d.pointers[a];e[a]&&e[a].callbacks[b]instanceof Array&&e[a].callbacks[b].forEach(function(a){a.sync()})}),h}},observeArray:function(a,b,c){var d=this;if(a instanceof Array){var e=this.weakReference(a);e.pointers||(e.pointers={},K.forEach(function(b){d.stubFunction(a,b)})),e.pointers[b]||(e.pointers[b]=[]),e.pointers[b].indexOf(c)===-1&&e.pointers[b].push(c)}},unobserveArray:function(a,b,c){if(a instanceof Array&&null!=a.__rv){var d=this.weakmap[a.__rv];if(d){var e=d.pointers[b];if(e){var f=e.indexOf(c);f>-1&&e.splice(f,1),e.length||delete d.pointers[b],this.cleanupWeakReference(d,a.__rv)}}}},observe:function(a,b,c){var d,e=this,f=this.weakReference(a).callbacks;if(!f[b]){f[b]=[];var g=Object.getOwnPropertyDescriptor(a,b);g&&(g.get||g.set||!g.configurable)||(d=a[b],Object.defineProperty(a,b,{enumerable:!0,get:function(){return d},set:function(c){if(c!==d){e.unobserveArray(d,a.__rv,b),d=c;var f=e.weakmap[a.__rv];if(f){var g=f.callbacks[b];g&&g.forEach(function(a){a.sync()}),e.observeArray(c,a.__rv,b)}}}}))}f[b].indexOf(c)===-1&&f[b].push(c),this.observeArray(a[b],a.__rv,b)},unobserve:function(a,b,c){var d=this.weakmap[a.__rv];if(d){var e=d.callbacks[b];if(e){var f=e.indexOf(c);f>-1&&(e.splice(f,1),e.length||(delete d.callbacks[b],this.unobserveArray(a[b],a.__rv,b))),this.cleanupWeakReference(d,a.__rv)}}},get:function(a,b){return a[b]},set:function(a,b,c){a[b]=c}},M=function(a){return null!=a?a.toString():void 0},N=function(a,b){for(var c=0;c<a;c++)b()},O={"on-*":{function:!0,priority:1e3,unbind:function(a){this.handler&&a.removeEventListener(this.arg,this.handler)},routine:function(a,b){this.handler&&a.removeEventListener(this.arg,this.handler),this.handler=this.eventHandler(b),a.addEventListener(this.arg,this.handler)}},"each-*":{block:!0,priority:4e3,bind:function(a){this.marker?this.iterated.forEach(function(a){a.bind()}):(this.marker=document.createComment(" tinybind: "+this.type+" "),this.iterated=[],a.parentNode.insertBefore(this.marker,a),a.parentNode.removeChild(a))},unbind:function(a){this.iterated&&this.iterated.forEach(function(a){a.unbind()})},routine:function(a,b){var c=this,d=this.arg;b=b||[];var e=a.getAttribute("index-property")||"$index";b.forEach(function(a,b){var g={$parent:c.view.models};g[e]=b,g[d]=a;var h=c.iterated[b];if(h)if(h.models[d]!==a){for(var i,j,k=b+1;k<c.iterated.length;k++)if(j=c.iterated[k],j.models[d]===a){i=k;break}void 0!==i?(c.iterated.splice(i,1),c.marker.parentNode.insertBefore(j.els[0],h.els[0]),j.models[e]=b):j=f(c,g,h.els[0]),c.iterated.splice(b,0,j)}else h.models[e]=b;else{var l=c.marker;c.iterated.length&&(l=c.iterated[c.iterated.length-1].els[0]),h=f(c,g,l.nextSibling),c.iterated.push(h)}}),this.iterated.length>b.length&&N(this.iterated.length-b.length,function(){var a=c.iterated.pop();a.unbind(),c.marker.parentNode.removeChild(a.els[0])}),"OPTION"===a.nodeName&&this.view.bindings.forEach(function(a){a.el===c.marker.parentNode&&"value"===a.type&&a.sync()})},update:function(a){var b=this,c={};Object.keys(a).forEach(function(d){d!==b.arg&&(c[d]=a[d])}),this.iterated.forEach(function(a){a.update(c)})}},"class-*":function(a,b){var c=" "+a.className+" ";!b==c.indexOf(" "+this.arg+" ")>-1&&(b?a.className=a.className+" "+this.arg:a.className=c.replace(" "+this.arg+" "," ").trim())},text:function(a,b){a.textContent=null!=b?b:""},html:function(a,b){a.innerHTML=null!=b?b:""},show:function(a,b){a.style.display=b?"":"none"},hide:function(a,b){a.style.display=b?"none":""},enabled:function(a,b){a.disabled=!b},disabled:function(a,b){a.disabled=!!b},checked:{publishes:!0,priority:2e3,bind:function(a){var b=this;this.callback||(this.callback=function(){b.publish()}),a.addEventListener("change",this.callback)},unbind:function(a){a.removeEventListener("change",this.callback)},routine:function(a,b){"radio"===a.type?a.checked=M(a.value)===M(b):a.checked=!!b}},value:{publishes:!0,priority:3e3,bind:function(a){if(this.isRadio="INPUT"===a.tagName&&"radio"===a.type,!this.isRadio){this.event=a.getAttribute("event-name")||("SELECT"===a.tagName?"change":"input");var b=this;this.callback||(this.callback=function(){b.publish()}),a.addEventListener(this.event,this.callback)}},unbind:function(a){this.isRadio||a.removeEventListener(this.event,this.callback)},routine:function(a,b){if(this.isRadio)a.setAttribute("value",b);else if("select-multiple"===a.type){if(b instanceof Array)for(var c=0;c<a.length;c++){var d=a[c];d.selected=b.indexOf(d.value)>-1}}else M(b)!==M(a.value)&&(a.value=null!=b?b:"")}},if:{block:!0,priority:4e3,bind:function(a){this.marker?this.bound===!1&&this.nested&&this.nested.bind():(this.marker=document.createComment(" tinybind: "+this.type+" "+this.keypath+" "),this.attached=!1,a.parentNode.insertBefore(this.marker,a),a.parentNode.removeChild(a)),this.bound=!0},unbind:function(){this.nested&&(this.nested.unbind(),this.bound=!1)},routine:function(a,b){!!b!==this.attached&&(b?(this.nested||(this.nested=new J(a,this.view.models,this.view.options),this.nested.bind()),this.marker.parentNode.insertBefore(a,this.marker.nextSibling),this.attached=!0):(a.parentNode.removeChild(a),this.attached=!1))},update:function(a){this.nested&&this.nested.update(a)}}},P={watch:function(a){return a},not:function(a){return!a},negate:function(a){return!a}},Q=function(a){function b(){return a.apply(this,arguments)||this}i(b,a);var c=b.prototype;return c.connectedCallback=function(){var a=this.constructor.__templateEl.content.cloneNode(!0);for(this.__tinybindView=z.bind(a,this);this.firstChild;)this.removeChild(this.firstChild);this.appendChild(a)},c.disconnectedCallback=function(){this.__tinybindView.unbind()},c.attributeChangedCallback=function(a,b,c){if(b!==c){var d=this.constructor.__propAttributeMap[a];this[d]=c}},h(b,null,[{key:"observedAttributes",get:function(){var a=this.template;if(!a)throw new Error("No template declared for "+this.name);this.__templateEl=document.createElement("template"),this.__templateEl.innerHTML=a;var b=this.__propAttributeMap={},c=[],d=this.properties;return d&&Object.keys(d).forEach(function(a){var e=d[a],f="string"==typeof e?e:a;b[f]=a,c.push(f)}),c}}]),b}(o(HTMLElement));return z.binders=O,z.formatters=P,z.adapters["."]=L,z.Component=Q,z.bind=function(a,b,c){var d={};b=b||{},c=c||{},t.forEach(function(a){d[a]=Object.create(null),c[a]&&Object.keys(c[a]).forEach(function(b){d[a][b]=c[a][b]}),Object.keys(z[a]).forEach(function(b){d[a][b]||(d[a][b]=z[a][b])})}),s.forEach(function(a){var b=c[a];d[a]=null!=b?b:z[a]}),d.starBinders=Object.keys(d.binders).filter(function(a){return a.indexOf("*")>0}),A.updateOptions(d);var e=new J(a,b,d);return e.bind(),e},z}),tinybind.binders.autocomplete={bind:function(a,b){},unbind:function(a){this.autocompleteInstance.destroy()},routine:function(a,b){this.autocompleteInstance&&this.autocompleteInstance.destroy(),this.autocompleteInstance=FLUIGC.autocomplete(a,{highlight:!0,minLength:0,maxTags:1,hint:!0,searchTimeout:100,type:$(a).attr("ac-type")||"tagAutocomplete",tagClass:$(a).attr("ac-tag-class")||"tag-info",displayKey:$(a).attr("ac-display-key"),templates:{tag:$(a).attr("ac-tag-template"),suggestion:$(a).attr("ac-tag-template")},source:substringMatcher(b,$(a).attr("ac-display-key"))},function(a,b){if(a){try{errMessage=JSON.parse(a.responseText.message),errMessage=errMessage.message?a.responseText.message:a.responseText}catch(a){errMessage="Não foi possível listar os dados"}FLUIGC.toast({message:errMessage,type:"danger"})}}),this.autocompleteInstance.on("fluig.autocomplete.itemAdded",this.publish)}},itemAdded=function(a,b){console.log(a,b),(void 0).dispatchEvent(new CustomEvent("itemchanged",{item:a.item}))},substringMatcher=function(a,b){return function(c,d){var e,f;e=[],f=new RegExp(c,"i"),$.each(a,function(a,c){f.test(c[b])&&e.push(c)}),d(e)}},tinybind.formatters.and=function(a,b){return a&&b},tinybind.configure({prefix:"lm",preloadData:!0,rootInterface:".",templateDelimiters:["{","}"],handler:function(a,b,c){this.call(a,b,c.view.models)}});